import{T as R,D as c}from"./chunk-PT47ROAO-BhxkwNFG.js";import"./chunk-EVKJNVKW-CV7xm_Hy.js";import{b as v,ag as y,j as a,H as E,f as T,l as b}from"./index-GW3g8wxz.js";import"./chunk-KEQOAJC2-CvqdX4Bh.js";import"./chunk-DTZXEQXZ-BEAyUivI.js";import"./chunk-ZQJPHZKI-D96oDnIv.js";import"./chunk-6HTZNHPT-Dv_ZB4zF.js";import{R as u}from"./chunk-WVA4O7QS-Dqh-Trb-.js";import"./chunk-D6UW7URG-CXu9yLvj.js";import{d as P}from"./chunk-HI6URQ7H-CGLwv2vX.js";import{u as I}from"./chunk-HBXV7ENS-DTeWfpVI.js";import"./chunk-PRLQLEEQ-BdlAk6U4.js";import"./chunk-QOCJPBRB-B2MOKIBR.js";import"./chunk-W7625H47-DG_ttsgo.js";import"./chunk-C76H5USB-GB-1Dh4G.js";import"./chunk-MSDRGCRR-DICakQWr.js";import"./chunk-P3UUX2T6-C8W0LH7R.js";import"./chunk-VT2JJ5C2-CwBCBM6E.js";import"./chunk-DFFLVEZ5-DyUc_jbV.js";import"./chunk-UC26CCHZ-DbXuoyCH.js";import"./chunk-BW322BVH-CHdPrxqb.js";import"./chunk-XLDQPLK4-EvTyQHpi.js";import"./chunk-ADOCJB6L-B7hrhpN_.js";import"./chunk-IQBAUTU5-BJcoBB7u.js";import"./chunk-3C6WQ7NH-DuMaLbRX.js";import"./chunk-MFALVTRQ-BdmjvUJ9.js";import"./chunk-R65S6ZZV-M3P982UR.js";import"./chunk-HQKGZADC-DwX-qX2H.js";import"./chunk-EMIHDNB7-C9N9vfXv.js";import"./index-C4EO7e68.js";var oe=()=>{const{t:r}=v(),{tax_rate_id:m}=y(),{tax_rate:t,isPending:p,isError:o,error:l}=P(m),{initialValues:d,isPending:e}=j(t),i=!p&&!!t&&!e&&!!d;if(o)throw l;return a.jsxs(u,{children:[a.jsxs(u.Header,{children:[a.jsx(u.Title,{asChild:!0,children:a.jsx(E,{children:r("taxRegions.taxOverrides.edit.header")})}),a.jsx(u.Description,{className:"sr-only",children:r("taxRegions.taxOverrides.edit.hint")})]}),i&&a.jsx(R,{taxRate:t,isCombinable:!0,initialValues:d})]})},j=r=>{const m=(r==null?void 0:r.rules)||[],t={product:[],product_type:[],shipping_option:[]};m.sort((e,i)=>e.created_at.localeCompare(i.created_at)).forEach(e=>{var s;const i=e.reference;(s=t[i])==null||s.push(e.reference_id)});const p=[{ids:t.product,hook:T,key:"product",getResult:e=>e.products.map(i=>({label:i.title,value:i.id}))},{ids:t.product_type,hook:b,key:"product_type",getResult:e=>e.product_types.map(i=>({label:i.value,value:i.id}))},{ids:t.shipping_option,hook:I,key:"shipping_option",getResult:e=>e.shipping_options.map(i=>({label:i.name,value:i.id}))}],o=p.map(({ids:e,hook:i})=>{const s=e.length>0;return{result:i({id:e.length>c?e.slice(0,c):e,limit:c},{enabled:s}),enabled:s}});if(!r)return{isPending:!0};const l=o.some(({result:e,enabled:i})=>i&&e.isPending);return l?{isPending:l}:(o.forEach(({result:e,enabled:i})=>{if(i&&e.isError)throw e.error}),{initialValues:p.reduce((e,{key:i,getResult:s},g)=>{let h=[];if(o[g].enabled){const _=s(o[g].result),x=new Map(_.map(n=>[n.value,n]));h=t[i].map(n=>{var f;return{value:n,label:((f=x.get(n))==null?void 0:f.label)||""}})}return{...e,[i]:h}},{}),isPending:!1})};export{oe as Component};
